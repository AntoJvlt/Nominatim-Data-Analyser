---
QUERY:
  type: SQLProcessor
  query: >
    SELECT ST_AsText(centroid), osm_id FROM placex WHERE osm_type='R' AND class='boundary'
    AND type='administrative' AND admin_level >= 15;
  results_types:
    - Node
  out:
    CONVERTER:
      type: GeoJSONFeatureConverter
      properties:
        relation_id: $osm_id
      out:
        GEOJSON:
          type: GeoJSONFormatter
          file_name: AdminBoundNoAL
          out:
            LAYER_FILE:
              type: LayerFormatter
              file_name: AdminBoundNoAdminLevel
              data_format_url: geojson_url
              name: no admin level
              updates: Every evening
              doc:
                description: Every relation with boundary=administrative should have an admin_level value set.
                why_problem: https://wiki.openstreetmap.org/wiki/Tag%3Aboundary%3Dadministrative
                how_to_fix: Add a tag 'admin_level' to the boundary relation.